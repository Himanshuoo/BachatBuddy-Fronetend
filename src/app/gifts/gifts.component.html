<div class="gifts-container">
    <div class="gifts-header">
        <h1>üéÅ Gift Store</h1>
        <p>Find the perfect gift for your loved ones</p>
    </div>

    <!-- Category Filter Bar -->
    <div class="filter-bar shadow-sm">
        <button *ngFor="let cat of categories" (click)="filterGifts(cat)" [class.active]="selectedCategory === cat"
            class="filter-btn">
            {{ cat }}
        </button>
    </div>

    <!-- Gifts Grid -->
    <div class="gifts-grid" *ngIf="filteredGifts.length > 0; else noGifts">
        <div class="gift-card shadow-sm" *ngFor="let item of filteredGifts" (click)="viewDetails(item)"
            style="cursor: pointer;">
            <div class="card-image">
                <img [src]="item.pimage" [alt]="item.pname">
                <span class="category-badge">{{ item.category }}</span>
            </div>
            <div class="card-body">
                <h4>{{ item.pname }}</h4>
                <p class="description">{{ item.description }}</p>
                <div class="price-row">
                    <span class="price">‚Çπ{{ item.price }}</span>
                    <span class="stock" *ngIf="item.qty > 0 && !item.needed">In Stock</span>
                </div>

                <!-- Group Progress Section -->
                <div class="progress-section" *ngIf="item.needed && item.joined !== undefined">
                    <div class="progress-container">
                        <div class="progress-bar-inner" [style.width.%]="(item.joined / item.needed) * 100">
                        </div>
                    </div>
                    <div class="joined-info">
                        <span>üë• {{item.joined}}/{{item.needed}} joined</span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn-detail" (click)="$event.stopPropagation(); viewDetails(item)">View
                        Details</button>
                    <button class="btn-buy" (click)="$event.stopPropagation(); buyNow(item)">
                        {{ item.needed ? 'Join Group' : 'Buy Now' }}
                    </button>
                </div>
            </div>
        </div>
    </div>

    <ng-template #noGifts>
        <div class="empty-state">
            <div class="empty-icon">üéÅ</div>
            <h3>No gifts found</h3>
            <p>Try selecting a different category.</p>
        </div>
    </ng-template>
</div>